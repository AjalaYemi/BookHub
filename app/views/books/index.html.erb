<% @page_title = "All Books" %>
<div class = "books index">
	<h2>Books</h2>
	<%=  %>
	<% if user_signed_in? %>
	<%= link_to(image_tag('plus_sign.png', :size => '11x11', :alt => '+') + " Add New Book", {:action => 'new'}, :class => 'action new') %>
	<% end %>

	
	<table class="listing" summary="Book list">
		<tr class="header">			
			<th>Name</th>
			<th>Author</th>
			<th>Publisher</th>
			<th>Page Count</th>
			<th>Word Count</th>
			<th>ISBN</th>
			<th>Published</th>
			<th>Actions</th>
		</tr>
		<% @books.each do |book| %>
		<tr class="<%= cycle('odd', 'even') %>">
			<td><%= book.name %></td>
			<td><%= @authors.find_by_id(book.author_id).name %></td>
			<td><%= book.publisher %></td>
			<td><%= book.page_count %></td>
			<td><%= book.word_count %></td>
			<td><%= book.isbn %></td>
			<td><%= book.published_year %></td>
			<td class="actions">
				<%= link_to("Show", book_path(book.id), :class => ' btn btn-primary btn-sm') %>
				 <% unless current_user.nil? %>				 
				<%= link_to("Edit", edit_book_path(book.id), :class => 'btn btn-info btn-sm') %>				 
				<% if current_user.id == book.created_by || current_user.try(:admin?) %>
				<%= link_to("Delete", delete_book_path(book.id), :class => 'btn btn-warning btn-sm') %>
				<% end %>
				<% end %>
			</td>
		</tr>
		<% end %>
	</table>
</div>